<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Escola Bíblica Dominical - IBCT</title>
    
    <style>
        /* 1. IMPORTAÇÃO E VARIÁVEIS */
        @import url('https://fonts.googleapis.com/css2?family=Montserrat:wght@400;500;700&family=Playfair+Display:wght@700&display=swap');
        :root {
            --cor-vinho: #902C3E;
            --cor-rosa-suave: #F4A9A2;
            --cor-creme-fundo: #F5EFE9;
            --cor-grafite-texto: #333333;
            --cor-branco: #FFFFFF;
            --sombra-suave: 0 4px 15px rgba(0, 0, 0, 0.08);
            --fonte-titulo: 'Playfair Display', serif;
            --fonte-corpo: 'Montserrat', sans-serif;
        }

        /* 2. ESTILOS GLOBAIS E RESET */
        * { margin: 0; padding: 0; box-sizing: border-box; }
        html { scroll-behavior: smooth; }
        body {
            font-family: var(--fonte-corpo);
            background-color: var(--cor-creme-fundo);
            color: var(--cor-grafite-texto);
            line-height: 1.6;
            overflow-x: hidden; /* Impede o scroll horizontal */
        }
        body.modal-open { overflow: hidden; } /* Bloqueia o scroll do body quando um modal está aberto */

        .container { max-width: 1100px; margin: 0 auto; padding: 0 20px; }
        h1, h2 { font-family: var(--fonte-titulo); color: var(--cor-vinho); margin-bottom: 20px; }
        h3 { font-family: var(--fonte-corpo); font-weight: 700; color: var(--cor-vinho); margin-bottom: 10px; }
        p { margin-bottom: 20px; }
        a { text-decoration: none; transition: opacity 0.3s ease; } /* Cor do link será definida no elemento */
        a:hover { opacity: 0.7; }
        
        /* 3. CABEÇALHO E NAVEGAÇÃO */
        .header {
            background-color: rgba(255, 255, 255, 0.95); backdrop-filter: blur(5px);
            padding: 20px 0; border-bottom: 2px solid var(--cor-creme-fundo);
            position: sticky; top: 0; z-index: 1000;
        }
        .header .container { display: flex; justify-content: space-between; align-items: center; }
        .logo { font-family: var(--fonte-titulo); font-size: 24px; color: var(--cor-vinho); }
        .logo span { font-family: var(--fonte-corpo); font-size: 16px; color: var(--cor-rosa-suave); }
        .nav-links { display: flex; }
        .nav-links a { margin-left: 25px; font-weight: 500; cursor: pointer; text-decoration: none; color: var(--cor-grafite-texto);}
        .hamburger { display: none; cursor: pointer; }
        .hamburger div { width: 25px; height: 3px; background-color: var(--cor-vinho); margin: 5px 0; transition: 0.4s; }

        /* 4. SEÇÃO HERO E COUNTDOWN */
        .hero { text-align: center; padding: 100px 0; }
        .hero h1 { font-size: 56px; line-height: 1.2; }
        .hero p { font-size: 18px; max-width: 600px; margin: 0 auto 30px auto; }
        .cta-button {
            display: inline-block; background-color: var(--cor-vinho); color: var(--cor-branco) !important;
            padding: 15px 35px; border-radius: 50px; font-weight: 700;
            text-transform: uppercase; letter-spacing: 1px; box-shadow: var(--sombra-suave);
            transition: opacity 0.3s ease;
        }
        .cta-button:hover { opacity: 0.9; }
        .content-section { padding: 80px 0; text-align: center; }

        #countdown-section { background-color: var(--cor-vinho); color: var(--cor-branco); }
        #countdown-section h2, #countdown-section p { color: var(--cor-branco); }
        .countdown-timer { display: flex; justify-content: center; gap: 20px; margin-top: 30px; }
        .countdown-block { background: rgba(255, 255, 255, 0.1); padding: 20px; border-radius: 8px; min-width: 100px; }
        .countdown-block span { display: block; font-size: 40px; font-weight: 700; }
        .countdown-block p { font-size: 14px; margin: 0; opacity: 0.8; text-transform: uppercase; }
        
        /* 5. SEÇÃO DE AULAS (Volta ao estilo original dos cards) */
        .lessons-wrapper { position: relative; }
        .lessons-scroller { display: flex; gap: 30px; overflow-x: auto; scroll-behavior: smooth; padding: 20px 5px; scrollbar-width: none; }
        .lessons-scroller::-webkit-scrollbar { display: none; }
        .lesson-card {
            flex: 0 0 300px; background-color: var(--cor-branco); border-radius: 8px;
            box-shadow: var(--sombra-suave); overflow: hidden; transition: transform 0.3s ease, box-shadow 0.3s ease; cursor: pointer;
        }
        .lesson-card:hover { transform: translateY(-5px); box-shadow: 0 8px 25px rgba(0, 0, 0, 0.12); }
        .lesson-card-image {
            height: 180px; background-color: var(--cor-rosa-suave); /* Cor padrão para imagem */
            display: flex; align-items: center; justify-content: center;
            font-family: var(--fonte-titulo); color: var(--cor-vinho); font-size: 20px;
        }
        /* Estilos específicos para o card de prova, como nas imagens originais */
        .lesson-card-image.prova-final { background-color: var(--cor-vinho); color: var(--cor-branco); }

        .lesson-card-content { padding: 25px; text-align: left; }
        .lesson-card .date { font-size: 14px; font-weight: 700; color: var(--cor-rosa-suave); margin-bottom: 10px; }
        .lesson-card h3 { font-size: 22px; font-family: var(--fonte-titulo); color: var(--cor-vinho); margin-bottom: 10px; }
        .scroll-button {
            position: absolute; top: 50%; transform: translateY(-50%); background-color: var(--cor-branco);
            color: var(--cor-vinho); border: 2px solid var(--cor-creme-fundo); width: 50px; height: 50px;
            border-radius: 50%; font-size: 24px; cursor: pointer; z-index: 10; box-shadow: var(--sombra-suave);
        }
        #prev-btn { left: -25px; }
        #next-btn { right: -25px; }

        /* 6. SEÇÃO DE AVISOS */
        #avisos { background-color: var(--cor-branco); }
        .avisos-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 30px; margin-top: 50px; text-align: left; }
        .aviso-card { background-color: var(--cor-creme-fundo); padding: 25px; border-radius: 8px; border-left: 5px solid var(--cor-rosa-suave); }
        .aviso-card h3 { color: var(--cor-vinho); margin-bottom: 10px; }
        
        /* 7. MODAIS (Gerais) */
        .modal-overlay {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.7);
            display: none; align-items: center; justify-content: center; z-index: 2000;
            padding: 20px; opacity: 0; transition: opacity 0.3s ease;
        }
        .modal-content {
            background: var(--cor-branco); padding: 40px; border-radius: 12px;
            max-width: 600px; width: 100%; position: relative;
            transform: scale(0.95); transition: transform 0.3s ease;
        }
        .modal-overlay.active { display: flex; opacity: 1; }
        .modal-overlay.active .modal-content { transform: scale(1); }
        .modal-close {
            position: absolute; top: 15px; right: 20px; font-size: 30px;
            color: var(--cor-grafite-texto); cursor: pointer; border: none; background: none;
        }
        
        /* 8. MODAL DE CALENDÁRIO */
        .calendar-modal-content {
            background: var(--cor-branco); padding: 30px; border-radius: 12px;
            max-width: 500px; width: 100%; position: relative;
        }
        .calendar-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; }
        .calendar-header h2 { font-size: 28px; margin: 0; color: var(--cor-vinho); }
        .calendar-nav-btn { background: none; border: none; font-size: 24px; color: var(--cor-vinho); cursor: pointer; }
        .calendar-grid, .weekdays { display: grid; grid-template-columns: repeat(7, 1fr); gap: 5px; }
        .weekdays div { text-align: center; font-weight: 700; color: var(--cor-rosa-suave); }
        .day-cell { text-align: center; padding: 10px 5px; cursor: pointer; border-radius: 50%; transition: background-color 0.2s, color 0.2s; position: relative; }
        .day-cell.prev-next-month-day { color: #ccc; }
        .day-cell:not(.prev-next-month-day):hover { background-color: var(--cor-creme-fundo); }
        .day-cell.current-day { background-color: var(--cor-rosa-suave); color: var(--cor-branco); }
        .day-cell.selected-day { background-color: var(--cor-vinho); color: var(--cor-branco); }
        .day-cell.event-day::after {
            content: ''; position: absolute; bottom: 5px; left: 50%; transform: translateX(-50%);
            width: 5px; height: 5px; border-radius: 50%; background-color: var(--cor-vinho);
        }
        .day-cell.selected-day.event-day::after { background-color: var(--cor-branco); } /* Ponto de evento em branco quando o dia está selecionado */
        #event-details { margin-top: 20px; padding-top: 20px; border-top: 1px solid var(--cor-creme-fundo); min-height: 50px; text-align: left; }
        #event-details h4 { font-size: 18px; margin-bottom: 10px; color: var(--cor-vinho); }
        .event-item { margin-bottom: 8px; font-size: 15px; }
        .event-item strong { color: var(--cor-rosa-suave); }

        /* 9. ANIMAÇÃO DE SCROLL (Fade-in uma única vez) */
        .fade-in { opacity: 0; transform: translateY(20px); transition: opacity 0.6s ease-out, transform 0.6s ease-out; }
        .fade-in.visible { opacity: 1; transform: translateY(0); }
        
        /* 10. RODAPÉ */
        .footer { background-color: var(--cor-vinho); color: var(--cor-creme-fundo); padding: 50px 0; text-align: center; margin-top: 60px; }
        .footer .logo { color: var(--cor-branco); } /* Corrigido para ser visível */
        .footer .logo span { color: var(--cor-rosa-suave); }
        
        /* 11. BOTÃO VOLTAR AO TOPO */
        .scroll-to-top {
            position: fixed; bottom: 30px; right: 30px; background-color: var(--cor-vinho); color: var(--cor-branco);
            width: 50px; height: 50px; border-radius: 50%; display: none; align-items: center; justify-content: center;
            font-size: 24px; cursor: pointer; z-index: 999; opacity: 0; transition: opacity 0.3s ease, transform 0.3s ease;
        }
        .scroll-to-top.visible { display: flex; opacity: 1; }

        /* 12. RESPONSIVIDADE MOBILE */
        @media (max-width: 768px) {
            .nav-links {
                position: absolute; top: 100%; right: 0; width: 100%;
                background-color: var(--cor-branco);
                flex-direction: column; padding: 10px 0 20px 0;
                max-height: 0; overflow: hidden; /* Controlado por JS para transição suave */
                transition: max-height 0.4s ease-in-out, box-shadow 0.4s ease-in-out;
                border-bottom-left-radius: 12px; border-bottom-right-radius: 12px;
                box-shadow: 0 10px 20px rgba(0,0,0,0.05);
            }
            .nav-links.active { max-height: 500px; /* Altura suficiente para o conteúdo */ }
            .nav-links a { margin: 15px 20px; text-align: left; }
            .hamburger { display: block; z-index: 1001; }
            .hamburger.toggle .line1 { transform: rotate(-45deg) translate(-5px, 6px); }
            .hamburger.toggle .line2 { opacity: 0; }
            .hamburger.toggle .line3 { transform: rotate(45deg) translate(-5px, -6px); }

            .hero h1 { font-size: 36px; }
            .countdown-block { flex-basis: calc(50% - 10px); }
            #prev-btn, #next-btn { display: none; } /* Esconde botões no mobile, pois o scroll touch é nativo */
            .lesson-card { flex-basis: 260px; }
            .calendar-header h2 { font-size: 22px; }
            .day-cell { padding: 8px 2px; }
        }
    </style>
</head>
<body>

    <header class="header">
        <div class="container">
            <div class="logo">IBCT <span>EBD</span></div>
            <nav class="nav-links">
                <a href="#aulas">Aulas</a>
                <a id="open-calendar-link">Calendário</a>
                <a href="#avisos">Avisos</a>
            </nav>
            <div class="hamburger">
                <div class="line1"></div><div class="line2"></div><div class="line3"></div>
            </div>
        </div>
    </header>

    <main>
        <section class="hero fade-in">
             <div class="container">
                <h1>Escola Bíblica Dominical</h1>
                <p>Um espaço de aprendizado, comunhão e crescimento na Palavra de Deus.</p>
                <a href="#aulas" class="cta-button">Ver Aulas do Trimestre</a>
            </div>
        </section>

        <section id="countdown-section" class="content-section fade-in">
            <div class="container">
                <h2>Prova Final do Trimestre</h2>
                <p>Prepare-se! O conhecimento adquirido será celebrado em nossa avaliação final.</p>
                <div class="countdown-timer">
                    <div class="countdown-block"><span id="days">00</span><p>Dias</p></div>
                    <div class="countdown-block"><span id="hours">00</span><p>Horas</p></div>
                    <div class="countdown-block"><span id="mins">00</span><p>Minutos</p></div>
                    <div class="countdown-block"><span id="secs">00</span><p>Segundos</p></div>
                </div>
            </div>
        </section>

        <section id="aulas" class="content-section fade-in">
            <div class="container">
                <h2>Aulas do Trimestre: Fundamentos da Fé</h2>
                <div class="lessons-wrapper">
                    <button id="prev-btn" class="scroll-button">&lt;</button>
                    <div class="lessons-scroller">
                        <!-- Cards de Aula com a estética original -->
                        <div class="lesson-card" data-title="A Doutrina da Criação" data-teacher="Pr. Matheus Guerra" data-scripture="Gênesis 1:1" data-description="Analisamos o relato bíblico da criação, sua importância teológica e o papel de Deus como Criador soberano de todas as coisas.">
                            <div class="lesson-card-image">Lição 01</div>
                            <div class="lesson-card-content"><div class="date">CONCLUÍDA</div><h3>A Doutrina da Criação</h3></div>
                        </div>
                        <div class="lesson-card" data-title="A Queda e o Pecado" data-teacher="Pr. Alexandre Coelho" data-scripture="Romanos 3:23" data-description="Estudamos as consequências da desobediência de Adão e Eva e como o pecado afetou toda a humanidade e a criação.">
                            <div class="lesson-card-image">Lição 02</div>
                            <div class="lesson-card-content"><div class="date">CONCLUÍDA</div><h3>A Queda e o Pecado</h3></div>
                        </div>
                        <div class="lesson-card" data-title="A Obra do Espírito Santo" data-teacher="Pr. Alexandre Coelho" data-scripture="João 14:26" data-description="Descubra as múltiplas facetas do ministério do Espírito Santo: Ele convence, regenera, santifica, consola e capacita a Igreja.">
                            <div class="lesson-card-image">Lição 06</div>
                            <div class="lesson-card-content"><div class="date">AULA ATUAL</div><h3>A Obra do Espírito Santo</h3></div>
                        </div>
                        <div class="lesson-card" data-title="Revisão de Filipenses" data-teacher="Pr. Matheus Guerra" data-scripture="Filipenses 4:13" data-description="Uma revisão completa da epístola da alegria. Recapitularemos os temas centrais: alegria em meio ao sofrimento, humildade de Cristo e contentamento.">
                            <div class="lesson-card-image">REVISÃO</div>
                            <div class="lesson-card-content"><div class="date">PRÓXIMA SEMANA</div><h3>Revisão de Filipenses</h3></div>
                        </div>
                        <div class="lesson-card" data-title="Prova Final do Trimestre" data-teacher="Todos os Professores" data-scripture="2 Timóteo 2:15" data-description="Chegou o dia de celebrarmos o conhecimento! A prova cobrirá todos os tópicos estudados neste trimestre sobre os Fundamentos da Fé.">
                            <div class="lesson-card-image prova-final">AVALIAÇÃO</div>
                            <div class="lesson-card-content"><div class="date">EM 2 SEMANAS</div><h3>Prova Final</h3></div>
                        </div>
                    </div>
                    <button id="next-btn" class="scroll-button">&gt;</button>
                </div>
            </div>
        </section>
        
        <section id="avisos" class="content-section fade-in">
            <div class="container">
                <h2>Avisos Importantes</h2>
                <div class="avisos-grid">
                    <div class="aviso-card">
                        <h3>Mutirão de Limpeza</h3>
                        <p>No próximo sábado, teremos nosso mutirão de limpeza e organização da igreja. Contamos com a sua ajuda a partir das 8h!</p>
                    </div>
                    <div class="aviso-card">
                        <h3>Campanha do Agasalho</h3>
                        <p>As doações para a campanha do agasalho podem ser entregues na secretaria até o final do mês. Aqueça o inverno de quem precisa.</p>
                    </div>
                     <div class="aviso-card">
                        <h3>Inscrições para Batismo</h3>
                        <p>As inscrições para a próxima turma de batismo já estão abertas. Procure a secretaria para mais informações.</p>
                    </div>
                </div>
            </div>
        </section>

    </main>

    <footer class="footer">
        <div class="container">
             <div class="logo">Igreja Batista Central <span>em Taguatinga</span></div>
             <p>&copy; 2024 IBCT. Todos os direitos reservados. <br> Um ministério dedicado ao ensino da Palavra.</p>
        </div>
    </footer>

    <!-- MODAL DE DETALHES DA AULA -->
    <div class="modal-overlay" id="lesson-modal">
        <div class="modal-content">
            <button class="modal-close">&times;</button>
            <h2 id="modal-title">Título da Lição</h2>
            <p id="modal-teacher">com Professor</p>
            <p id="modal-description">Descrição detalhada da lição...</p>
            <p id="modal-scripture">"Versículo-chave"</p>
        </div>
    </div>
    
    <!-- NOVO MODAL DE CALENDÁRIO -->
    <div class="modal-overlay" id="calendar-modal">
        <div class="calendar-modal-content">
            <button class="modal-close">&times;</button>
            <div class="calendar-header">
                <button id="prev-month" class="calendar-nav-btn">&lt;</button>
                <h2 id="month-year"></h2>
                <button id="next-month" class="calendar-nav-btn">&gt;</button>
            </div>
            <div class="weekdays">
                <div>Dom</div><div>Seg</div><div>Ter</div><div>Qua</div><div>Qui</div><div>Sex</div><div>Sáb</div>
            </div>
            <div class="calendar-grid" id="calendar-days"></div>
            <div id="event-details">
                <p>Selecione um dia para ver os eventos.</p>
            </div>
        </div>
    </div>
    
    <!-- BOTÃO VOLTAR AO TOPO -->
    <a class="scroll-to-top">&#9650;</a>

    <script>
        document.addEventListener('DOMContentLoaded', () => {

            // --- DADOS PARA EVENTOS DO CALENDÁRIO ---
            const eventData = {
                // Formato: "AAAA-MM-DD": [{ time: 'HH:MM', title: 'Nome do Evento' }]
                "2025-06-28": [ { time: '09:00', title: 'Prova Final da EBD' }, { time: '19:00', title: 'Culto de Jovens' } ],
                "2025-07-05": [ { time: '19:30', title: 'Vigília de Oração' } ],
                "2025-07-12": [ { time: '08:00', title: 'Mutirão de Limpeza' }, { time: '20:00', title: 'Noite de Louvor' } ],
                "2025-07-20": [ { time: '10:00', title: 'Culto de Missões' } ],
                "2025-08-03": [ { time: '18:30', title: 'Reunião de Líderes' } ]
            };

            // --- 1. LÓGICA DO MENU HAMBÚRGUER ---
            const hamburger = document.querySelector('.hamburger');
            const navLinks = document.querySelector('.nav-links');

            hamburger.addEventListener('click', () => {
                navLinks.classList.toggle('active');
                hamburger.classList.toggle('toggle');
                // Bloqueia/desbloqueia o scroll do body quando o menu mobile está ativo
                document.body.classList.toggle('modal-open'); 
            });

            // --- 2. LÓGICA DO COUNTDOWN ---
            const daysEl = document.getElementById('days');
            const hoursEl = document.getElementById('hours');
            const minsEl = document.getElementById('mins');
            const secsEl = document.getElementById('secs');

            // Data da prova final: 28 de Junho de 2025, às 09:00
            const finalExamDate = new Date('2025-06-28T09:00:00');

            function updateCountdown() {
                const now = new Date();
                const diff = finalExamDate - now;

                if (diff <= 0) {
                    document.querySelector('.countdown-timer').innerHTML = "<h4>A Prova já aconteceu!</h4>";
                    clearInterval(countdownInterval);
                    return;
                }

                const days = Math.floor(diff / (1000 * 60 * 60 * 24));
                const hours = Math.floor((diff % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
                const mins = Math.floor((diff % (1000 * 60 * 60)) / (1000 * 60));
                const secs = Math.floor((diff % (1000 * 60)) / 1000);

                daysEl.innerText = String(days).padStart(2, '0');
                hoursEl.innerText = String(hours).padStart(2, '0');
                minsEl.innerText = String(mins).padStart(2, '0');
                secsEl.innerText = String(secs).padStart(2, '0');
            }

            const countdownInterval = setInterval(updateCountdown, 1000);
            updateCountdown(); // Chama uma vez para exibir imediatamente

            // --- 3. LÓGICA DO CARROSSEL DE AULAS ---
            const lessonsScroller = document.querySelector('.lessons-scroller');
            const prevBtn = document.getElementById('prev-btn');
            const nextBtn = document.getElementById('next-btn');
            
            if (lessonsScroller) { // Verifica se o scroller existe (para evitar erros em pages sem ele)
                const scrollAmount = 330; // Largura do card + gap (300px + 30px)
                prevBtn.addEventListener('click', () => lessonsScroller.scrollBy({ left: -scrollAmount, behavior: 'smooth' }));
                nextBtn.addEventListener('click', () => lessonsScroller.scrollBy({ left: scrollAmount, behavior: 'smooth' }));
            }

            // --- 4. LÓGICA DOS MODAIS (Detalhamento da Aula e Calendário) ---
            const lessonModal = document.getElementById('lesson-modal');
            const calendarModal = document.getElementById('calendar-modal');
            
            // Abre o modal de aula
            document.querySelectorAll('.lesson-card').forEach(card => {
                card.addEventListener('click', () => {
                    document.getElementById('modal-title').innerText = card.dataset.title;
                    document.getElementById('modal-teacher').innerText = `com ${card.dataset.teacher}`;
                    document.getElementById('modal-description').innerText = card.dataset.description;
                    document.getElementById('modal-scripture').innerText = `"${card.dataset.scripture}"`;
                    openAnyModal(lessonModal);
                });
            });

            // Abre o modal do calendário
            document.getElementById('open-calendar-link').addEventListener('click', () => {
                currentDate = new Date(); // Reinicia para o mês atual ao abrir
                renderCalendar();
                openAnyModal(calendarModal);
            });

            // Fecha qualquer modal
            document.querySelectorAll('.modal-close').forEach(btn => {
                btn.addEventListener('click', (e) => {
                    const modalToClose = e.target.closest('.modal-overlay');
                    closeAnyModal(modalToClose);
                });
            });
            
            // Funções auxiliares para abrir/fechar modais e controlar o scroll do body
            function openAnyModal(modalElement) {
                modalElement.classList.add('active');
                document.body.classList.add('modal-open'); // Bloqueia o scroll do body
            }

            function closeAnyModal(modalElement) {
                modalElement.classList.remove('active');
                // Desbloqueia o scroll do body APENAS se o menu mobile não estiver aberto
                if (!navLinks.classList.contains('active')) {
                    document.body.classList.remove('modal-open');
                }
            }

            // --- 5. LÓGICA DO CALENDÁRIO ---
            let currentDateCalendar = new Date(); // Variável dedicada ao calendário
            const monthYearEl = document.getElementById('month-year');
            const calendarDaysEl = document.getElementById('calendar-days');
            const eventDetailsEl = document.getElementById('event-details');

            function renderCalendar() {
                const month = currentDateCalendar.getMonth();
                const year = currentDateCalendar.getFullYear();
                monthYearEl.textContent = `${currentDateCalendar.toLocaleString('pt-BR', { month: 'long' })} ${year}`;
                calendarDaysEl.innerHTML = ''; // Limpa os dias anteriores
                eventDetailsEl.innerHTML = '<p>Selecione um dia para ver os eventos.</p>'; // Limpa detalhes de eventos

                const firstDayOfMonth = new Date(year, month, 1).getDay(); // Dia da semana do 1º dia (0=Dom, 6=Sáb)
                const lastDateOfMonth = new Date(year, month + 1, 0).getDate(); // Último dia do mês atual
                const lastDateOfPrevMonth = new Date(year, month, 0).getDate(); // Último dia do mês anterior

                // Preenche dias do mês anterior
                for (let i = firstDayOfMonth; i > 0; i--) {
                    const dayCell = document.createElement('div');
                    dayCell.className = 'day-cell prev-next-month-day';
                    dayCell.textContent = lastDateOfPrevMonth - i + 1;
                    calendarDaysEl.appendChild(dayCell);
                }

                // Preenche dias do mês atual
                for (let i = 1; i <= lastDateOfMonth; i++) {
                    const dayCell = document.createElement('div');
                    dayCell.className = 'day-cell';
                    dayCell.textContent = i;
                    
                    const today = new Date();
                    // Adiciona classe para o dia atual
                    if (i === today.getDate() && month === today.getMonth() && year === today.getFullYear()) {
                        dayCell.classList.add('current-day');
                    }

                    // Formata a data para buscar eventos (YYYY-MM-DD)
                    const dateStr = `${year}-${String(month + 1).padStart(2, '0')}-${String(i).padStart(2, '0')}`;
                    if (eventData[dateStr]) {
                        dayCell.classList.add('event-day'); // Marca dias com eventos
                    }

                    dayCell.addEventListener('click', () => showEvents(dateStr, dayCell));
                    calendarDaysEl.appendChild(dayCell);
                }
            }

            function showEvents(dateStr, cell) {
                // Remove seleção de dias anteriores e adiciona ao dia clicado
                document.querySelectorAll('.day-cell.selected-day').forEach(c => c.classList.remove('selected-day'));
                cell.classList.add('selected-day');

                const events = eventData[dateStr];
                if (events && events.length > 0) {
                    eventDetailsEl.innerHTML = `<h4>Eventos para ${new Date(dateStr + 'T00:00:00').toLocaleDateString('pt-BR', {day: '2-digit', month: 'long', year: 'numeric'})}:</h4>`;
                    events.forEach(event => {
                        const eventEl = document.createElement('div');
                        eventEl.className = 'event-item';
                        eventEl.innerHTML = `<strong>${event.time}</strong> - ${event.title}`;
                        eventDetailsEl.appendChild(eventEl);
                    });
                } else {
                    eventDetailsEl.innerHTML = '<p>Nenhum evento agendado para este dia.</p>';
                }
            }
            
            document.getElementById('prev-month').addEventListener('click', () => {
                currentDateCalendar.setMonth(currentDateCalendar.getMonth() - 1);
                renderCalendar();
            });
            document.getElementById('next-month').addEventListener('click', () => {
                currentDateCalendar.setMonth(currentDateCalendar.getMonth() + 1);
                renderCalendar();
            });
            
            // --- 6. LÓGICA DO BOTÃO "VOLTAR AO TOPO" ---
            const scrollToTopBtn = document.querySelector('.scroll-to-top');
            
            window.addEventListener('scroll', () => {
                // Adiciona/remove a classe 'visible' baseada na posição do scroll
                scrollToTopBtn.classList.toggle('visible', window.scrollY > 300);
            });
            
            scrollToTopBtn.addEventListener('click', (e) => {
                e.preventDefault(); // Previne o comportamento padrão do link
                window.scrollTo({ top: 0, behavior: 'smooth' }); // Scroll suave para o topo
            });

            // --- 7. LÓGICA DA ANIMAÇÃO AO ROLAR (FADE IN ÚNICO) ---
            const fadeElements = document.querySelectorAll('.fade-in');
            const observerFadeIn = new IntersectionObserver((entries, observer) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        entry.target.classList.add('visible');
                        observer.unobserve(entry.target); // Deixa de observar após a animação (executa apenas uma vez)
                    }
                });
            }, {
                threshold: 0.1 // A animação começa quando 10% do elemento está visível
            });

            fadeElements.forEach(el => observerFadeIn.observe(el));
        });
    </script>
</body>
</html>